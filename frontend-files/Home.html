<!DOCTYPE html>
<html style="font-size: 16px;">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="Coin Capsule, Send some bitcoin">
  <meta name="description" content="">
  <meta name="page_type" content="np-template-header-footer-from-plugin">
  <title>Home</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="Home.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">



  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"url": "index.html",
		"logo": "images/coin-capsule-logo.png"
}</script>
  <style>
    /* The Modal (background) */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      padding-top: 100px;
      /* Location of the box */
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.4);
      /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
      position: relative;
      background-color: #fefefe;
      margin: auto;
      padding: 0;
      border: 1px solid #888;
      width: 80%;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      -webkit-animation-name: animatetop;
      -webkit-animation-duration: 0.4s;
      animation-name: animatetop;
      animation-duration: 0.4s
    }

    /* Add Animation */
    @-webkit-keyframes animatetop {
      from {
        top: -300px;
        opacity: 0
      }

      to {
        top: 0;
        opacity: 1
      }
    }

    @keyframes animatetop {
      from {
        top: -300px;
        opacity: 0
      }

      to {
        top: 0;
        opacity: 1
      }
    }

    /* The Close Button */
    .close {
      color: white;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }

    .modal-header {
      padding: 2px 16px;
      background-color: #3857bd;
      color: #dedede;
    }

    #successModal .modal-header {
      background-color: #00e600;
    }

    #failureModal .modal-header {
      background-color: #db545a;
    }

    .modal-body {
      padding: 2px 16px;
    }

    #request_addr {
      background-color: #387cbd;
      color: #e6e6e6;
      margin-top: 1px;
      margin-bottom: 1px;
      padding: 15px 15px 15px 15px;
      position: relative;
      outline: 0;
      background-image: none;
      display: inline-block;
    }

    #request_addr:active {
      background-color: #387cbd;
    }

    #request_addr:hover {
      background-color: #478ac9;
    }
  </style>
  <meta property="og:title" content="Home">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#478ac9">
  <link rel="canonical" href="index.html">
  <meta property="og:url" content="index.html">
</head>

<body class="u-body">
  <header class="u-clearfix u-header u-header" id="sec-5d93">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="images/coin-capsule-logo.png" class="u-image u-logo u-image-1" data-image-width="1280" data-image-height="1280">
        <img src="images/coin-capsule-logo.png" class="u-logo-image u-logo-image-1" data-image-width="77">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
            <svg>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <defs>
                <symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;">
                  <rect y="1" width="16" height="2"></rect>
                  <rect y="7" width="16" height="2"></rect>
                  <rect y="13" width="16" height="2"></rect>
                </symbol>
              </defs>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/" style="padding: 10px 20px;">Home</a>
            </li>
            <!-- <li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="About.html" style="padding: 10px 20px;">About</a>
            </li> -->
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html" style="padding: 10px 20px;">Home</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section class="u-align-left u-clearfix u-image u-section-1" src="" data-image-width="1280" data-image-height="853" id="sec-50db">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <div class="u-align-left u-container-style u-group u-white u-group-1">
        <div class="u-container-layout u-container-layout-1">
          <h1 class="u-text u-title u-text-1">Coin Capsule</h1>
          <p class="u-large-text u-text u-text-variant u-text-2">Tempted to sell or send? Lock it away securely with Coin Capsule!</p>
          <p><i>Please note: your returned amount will be exactly 0.000050 BTC less (very little) than what you sent us. This is due to the miner's fees applied.</i></p>
          <a href="Home.html#sec-0595" data-page-id="54834657" class="u-btn u-button-style u-palette-2-base u-btn-1">Lets GO<br>
          </a>
        </div>
      </div>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-section-2" id="sec-0595" style="background-color: #fcba03;">
    <div class="u-clearfix u-sheet u-sheet-1">
      <h2 class="u-text u-text-1">Want to send some bitcoin?</h2>
      <div class="u-form u-form-1">
        <div id="request_addr">Get A Personal Address To Send To!</div>
      </div>
    </div>
  </section>

  <section class="u-align-center u-clearfix u-section-2" id="sec-0595">
    <div class="u-clearfix u-sheet u-sheet-1">
      <h2 class="u-text u-text-1">INPUT DETAILS to schedule your pay date</h2>
      <p>Please note that the <u>default date</u> is in the Chicago timezone. Due to the server's current functionality, any dates which are "yesterday" or earlier <i><u>for Chicago</u></i> will <strong>not</strong> be accepted.</p>
      <div class="u-expanded-width u-form u-form-1">
        <form id="subTransForm" action="/" method="POST" class="u-clearfix u-form-horizontal u-form-spacing-15 u-inner-form" style="padding: 15px;" source="custom">
          <div class="u-form-group u-form-name">
            <label for="name-ef64" class="u-form-control-hidden u-label"></label>
            <input type="text" placeholder="Transaction Hash" id="name-ef64" name="completed_transaction_hash" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" required="">
          </div>
          <div class="u-form-group u-form-group-2">
            <label for="text-8740" class="u-form-control-hidden u-label"></label>
            <input type="text" id="text-8740" name="rec_addr" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" placeholder="Your Receiving Bitcoin Address">
          </div>
          <div class="u-form-date u-form-group">
            <label for="email-ef64" class="u-form-control-hidden u-label">Email</label>
            <input id="returnDate" type="date" placeholder="Date to Return" id="email-ef64" name="date" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" required="required">
          </div>
          <div class="u-form-group u-form-submit">
            <a href="#" class="u-btn u-btn-submit u-button-style">Submit To Process<br>
            </a>
            <input id="subTrans" type="submit" value="submit" class="u-form-control-hidden">
          </div>
          <div class="u-form-send-message u-form-send-success">#FormSendSuccess</div>
          <div class="u-form-send-error u-form-send-message">#FormSendError</div>
        </form>
      </div>
    </div>
  </section>


  <!-- The Modal -->
  <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-header">
        <span id="closeModal" class="close">&times;</span>
        <h2>Send Your Bitcoin Here</h2>
      </div>
      <div class="modal-body">
        <p class="toChange">change here</p>
        <p>This address will only be shown once, and only right here to you. This ensures no one else can steal your Bitcoin!</p>
      </div>
    </div>

  </div>

  <div id="successModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-header">
        <span id="closeModal" class="close">&times;</span>
        <h2>Success</h2>
      </div>
      <div class="modal-body">
        <p class="toChange">change here</p>
        <!-- <p>This address will only be shown once, and only right here to you. This ensures no one else can steal your Bitcoin!</p> -->
      </div>
    </div>

  </div>

  <div id="failureModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-header">
        <span id="closeModal" class="close">&times;</span>
        <h2>Failure</h2>
      </div>
      <div class="modal-body">
        <p class="toChange">change here</p>
        <!-- <p>This address will only be shown once, and only right here to you. This ensures no one else can steal your Bitcoin!</p> -->
      </div>
    </div>

  </div>


  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-c192">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">Project by Jacob Cohen for Fintech MLH Hackathon.<br>Copyright © 2021 Jacob Cohen<br>
      </p>
    </div>
  </footer>

  <script class="u-script" type="text/javascript" src="jquery.js"></script>
  <script>
    function pendingOrZeroModal() {
      // window.onclick = function (event) {
      //   $('.modal').hide();
      // }
      $('#failureModal').find('.modal-body').find(".toChange").text('Your transaction has not yet been confirmed sufficiently by the blockchain. Please try again later.');
      $('#failureModal').show();
    }
    function notFoundModal() {
      // window.onclick = function (event) {
      //   $('.modal').hide();
      // }
      $('#failureModal').find('.modal-body').find(".toChange").text('Your transaction was not found among the transactions sent to Coin Capsule! Did you send to an address received from the "Get A Personal Address" button?');
      $('#failureModal').show();
    }

    function invalidDateModal() {
      $('#failureModal').find('.modal-body').find(".toChange").text('This date is invalid! The date must be on today (which will return your money in minutes) or a later date.');
      $('#failureModal').show();
    }

    // jQuery.extend({
    //   post: function (url, data, callback, type) {
    //     if (jQuery.isFunction(data)) {
    //       type = type || callback;
    //       callback = data;
    //       data = {};
    //     }

    //     return jQuery.ajax({
    //       type: "POST",
    //       url: url,
    //       data: data,
    //       success: callback,
    //       dataType: type
    //     });
    //   }
    // });

    function convertTZ(date, tzString) {
      return new Date((typeof date === "string" ? new Date(date) : date).toLocaleString("en-US", { timeZone: tzString }));
    }

    $(document).ready(function () {
      $('#returnDate').val(convertTZ(new Date(), 'America/Chicago').getDate());

      var now = new Date();
      var day = ("0" + now.getDate()).slice(-2);
      var month = ("0" + (now.getMonth() + 1)).slice(-2);
      var today = now.getFullYear() + "-" + (month) + "-" + (day);
      $('#returnDate').val(today);
      $('.close').click(function () {
        $('.modal').hide();
      });
      $('#subTrans').click(function () {
        // console.log('completed transaction form has told to send and post');
        // jQuery.post('/', $('#subTransForm').serialize(), function (ret) {
        //   // Other modal
        //   window.onclick = function (event) {
        //     $('.modal').hide();
        //   }
        //   if (ret == 'pendingOrZero') {
        //     pendingOrZeroModal();
        //   }
        //   else if (ret == 'notFound') {
        //     notFoundModal();
        //   }
        //   else {
        //     $('#successModal').find('.modal-body').find(".toChange").text('Your bitcoin will be delivered back to ' + ret);
        //     $('#successModal').show();
        //   }
        // }, 'application/json');
        console.log('no stringify: ' + $('#subTransForm').serialize());
        $.post('/', $('#subTransForm').serialize()).done(function (ret) {
          // Other modal
          // window.onclick = function (event) {
          //   $('.modal').hide();
          // }
          if (String(ret).replace("\n", '').includes('pendingOrZero')) {
            pendingOrZeroModal();
          }
          else if (String(ret).replace("\n", '').includes('notFound')) {
            notFoundModal();
          }
          else if (String(ret).replace("\n", '').includes('invalidDate')) {
            invalidDateModal();
          }
          else {
            $('#successModal').find('.modal-body').find(".toChange").text('Your bitcoin will be delivered back to ' + ret);
            $('#successModal').show();
          }
        });
      });
      $('#subTransForm').submit(function (e) {
        e.preventDefault(), e.stopPropagation();
      });
      $('#request_addr').click(function () {
        jQuery.post('/', "request_addr=true", function (addr) {
          // window.onclick = function (event) {
          //   $('.modal').hide();
          // }
          $('#myModal').find('.modal-body').find(".toChange").text('Send your bitcoins to this address: ' + addr);
          $('#myModal').show();
        }, 'application/x-www-form-urlencoded');
        $.post('/', "request_addr=true").done(function (addr) {
          // window.onclick = function (event) {
          //   $('.modal').hide();
          // }
          $('#myModal').find('.modal-body').find(".toChange").text('Send your bitcoins to this address: ' + addr);
          $('#myModal').show();
        });
      });
    });
  </script>
</body>

</html>